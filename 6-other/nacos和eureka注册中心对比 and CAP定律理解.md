# nacos和eureka注册中心对比 and CAP定律理解

1. CP 和 AP不可能同时满足

2.P代表分区容错, 在整个分布式系统中某个节点服务挂掉了,并不影响整个系统的运作和使用，

                           因为他可以在稍后或者通过切换可用节点立即恢复使用


3.C:  写操作之后的读操作，必须返回该值。

         注册中心集群中: leader的作用, 所有的写操作都依赖于leader来完成,为了保证数据的一致性,  leader只有一个
    
         假如: 没有leader,首先加入我们新加入一台数据处理服务,就会向注册中心1进行注册,注册中心1写入数据处理服务的ip
    
                  等等基本信息,并且准备同步给其他注册中心节点, 结果这个在还没发生同步的过程中,注册中心1挂掉了,
    
                  然后客户端准备调用数据中心写入,这个时候就因为注册中心1挂掉了,就直接切到了注册中心2,但是注册中心2没有
    
                  收到数据处理服务的添加请求,所以没有这个服务,这个时候就对客户端显示不可用了.

  4. A:   没有leader,可以很容易的切换到可用的注册中心,对于客户端的调用总是及时反应, 在上述C操作的例子中,

             对于向服务注册,获取服务注册的基本信息,比如ip来说,基本不会存在,因为像Eureka来说,我们的服务可以

             向所有的注册中心节点发起注册请求,  这样就不会存在注册中心节点服务列表不一致的情况

 

   阿里的nacos : 性能最好

     他同时支持AP和CP模式,他根据服务注册选择临时和永久来决定走AP模式还是CP模式,
    
    他这里支持CP模式对于我的理解来说,应该是为了配置中心集群,因为nacos可以同时作为注册中心和配置中心,
    
    因为他的配置中心信息是保存在nacos里面的,假如因为nacos其中一台挂掉后,还没有同步配置信息,
    
    就可能发生配置不一致的情况., 配置中心的配置变更是服务端有监听器,配置中心发生配置变化,
    
    然后服务端会监听到配置发生变化,从而做出改变


​    

 eureka+spring cloud config: 

   性能也不差,对于服务数量小于上千台来说,性能没有问题

   eureka: 可以做注册中心,完全AP,支持注册中心之间的节点复制,同时支持服务端同时注册多个注册中心节点,

                  所以不存节点信息不一致的情况

  config: 单独服务,是从git仓库拉取配置信息,然后服务端从config服务里面拉取配置信息缓存到本地仓库

              这里配置的变更比较麻烦,他需要结合bus组件,同时约束了只能用rabbitmq和kafka来进行通知服务端进行配置变更
    
              但是保证了数据的一致性,因为他的配置信息在git仓库上,git仓库只有一个,就会数据一致          

 


阿里nacos异常情况 leader挂了

   1.不影响服务之间互相调用

    2.不影响服务注册
    
    3.不影响服务正常启动拉取配置文件
    
    4.选举新leader差不多4,5秒钟
————————————————
版权声明：本文为CSDN博主「辛一一」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/xc123_java/article/details/90200189